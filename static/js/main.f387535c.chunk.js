(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(7),s=n.n(i),o=(n(14),n(1)),r=n(2),c=n(4),u=n(3),d=(n(15),n(8)),h=(n(16),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(d.a)({},n,l))},a.handleSubmitStartNewGame=function(e){e.preventDefault();var t=a.state,n=t.columnsCount,l=t.rowsCount,i=t.minesCount;(0,a.props.handleStartNewGame)(Number(n),Number(l),Number(i))},a.state={columnsCount:9,rowsCount:9,minesCount:10},a}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state,t=e.columnsCount,n=e.rowsCount,a=e.minesCount,i=t*n-1;return l.a.createElement("form",{name:"initGameSettings",className:"formInitGameSettings",action:"",onSubmit:this.handleSubmitStartNewGame},l.a.createElement("label",{htmlFor:"x"},"X:",l.a.createElement("input",{type:"number",name:"columnsCount",className:"fieldColumnsCount",min:"2",max:"70",value:t,onChange:this.handleChange,required:!0})),l.a.createElement("label",{htmlFor:"y"},"Y:",l.a.createElement("input",{type:"number",name:"rowsCount",className:"fieldRowsCount",min:"2",max:"64",value:n,onChange:this.handleChange,required:!0})),l.a.createElement("label",{htmlFor:"mines"},"Mines:",l.a.createElement("input",{type:"number",name:"minesCount",className:"fieldMinesCount",min:"1",max:i,value:a,onChange:this.handleChange,required:!0})),l.a.createElement("button",{type:"submit",className:"buttonStartGame"},"Start game!"))}}]),n}(l.a.PureComponent)),m=(n(17),{0:"",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",C:"",M:"\ud83d\udca3",ME:"\ud83d\udca3",F:"\ud83d\udea9",FW:"\u2715"}),f={0:"empty",1:"digit1",2:"digit2",3:"digit3",4:"digit4",5:"digit5",6:"digit6",7:"digit7",8:"digit8",M:"mine",ME:"mine mineExplosion",C:"closed",F:"closed flagged",FW:"flaggedWrong"},g=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.closedField,n=e.gameProcessState,a=e.boardHandles;return l.a.createElement("div",Object.assign({className:"fieldContainer"},a),t.map((function(e,t){return e.map((function(e,a){var i="playing"!==n||f[e].includes("empty");return l.a.createElement("button",{key:"Cell__".concat(a,"_").concat(t),"data-x":a,"data-y":t,className:"Cell ".concat(f[e]),disabled:i},m[e])}))})))}}]),n}(l.a.Component),v=n(5),p=function(e){return function(e,t){return Math.floor(e+Math.random()*(t+1-e))}(0,e-1)},C=0,y="C",F="M",E="ME",b="F",_="FW",S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(Object(o.a)(this,e),a>t*n)throw new Error("ERROR: mines more than cell");this.x=t,this.y=n,this.mines=a,this.field=[],this.closedField=[],this.leftFlags=a,this.leftClosed=t*n,this.gameState="playing"}return Object(r.a)(e,[{key:"_initMines",value:function(){for(var e=this.mines;0!==e;){var t=p(this.x),n=p(this.y);this.field[n][t]!==F&&(this.field[n][t]=F,e-=1)}return!0}},{key:"_getArea8",value:function(e,t){for(var n=[],a=t-1;a<=t+1;a+=1)for(var l=e-1;l<=e+1;l+=1)a>=0&&a<this.y&&l>=0&&l<this.x&&(e!==l||t!==a)&&n.push({x:l,y:a});return n}},{key:"_getArea8Closed",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getArea8(e,t);return a.filter((function(e){var t=e.x,a=e.y;return n.closedField[a][t]===y}))}},{key:"_getArea8Flagged",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getArea8(e,t);return a.filter((function(e){var t=e.x,a=e.y;return n.closedField[a][t]===b}))}},{key:"_increaseMineCounterInArea8",value:function(e,t){var n=this;this._getArea8(e,t).forEach((function(e){var t=e.x,a=e.y,l=n.field[a][t];l!==F&&(n.field[a][t]=l+1)}))}},{key:"_calculateMinesAndSetCounterValues",value:function(){var e=this;this.field.forEach((function(t,n){return t.forEach((function(t,a){t===F&&e._increaseMineCounterInArea8(a,n)}))}))}},{key:"_initFieldAndFillValue",value:function(e){var t=this;return Array.from({length:this.y},(function(){return new Array(t.x).fill(e)}))}},{key:"init",value:function(){this.closedField=this._initFieldAndFillValue(y),this.field=this._initFieldAndFillValue(C),this._initMines(),this._calculateMinesAndSetCounterValues(),this.gameState="playing"}},{key:"_markAllWrongFlag",value:function(){var e=this;this.closedField.forEach((function(t,n){return t.forEach((function(t,a){t===b&&e.field[n][a]!==F&&(e.closedField[n][a]=_)}))}))}},{key:"_markAllTailClosedFlag",value:function(){var e=this;this.closedField.forEach((function(t,n){return t.forEach((function(t,a){t===y&&e.field[n][a]===F&&(e.closedField[n][a]=b)}))}))}},{key:"_showAllClosedMine",value:function(){var e=this;this.closedField.forEach((function(t,n){return t.forEach((function(t,a){t===y&&e.field[n][a]===F&&(e.closedField[n][a]=F)}))}))}},{key:"_openCell",value:function(e,t){return this.leftClosed-=1,this.closedField[t][e]=this.field[t][e],!0}},{key:"_exitLoseExplosion",value:function(e,t){console.log("\ud83d\udca3Explosion\ud83d\udca3! GAME OVER"),this.closedField[t][e]=E,this._markAllWrongFlag(),this._showAllClosedMine(),this.gameState="lose"}},{key:"_exitWinAllOpened",value:function(){this._markAllTailClosedFlag(),console.log("All opened!  You win!\ud83c\udfc6"),this.gameState="win"}},{key:"stepToOpenCell",value:function(e,t){if(this.closedField[t][e]!==y)return!1;if(this._openCell(e,t),this.field[t][e]===F)return this._exitLoseExplosion(e,t);if(this.leftClosed===this.leftFlags)return console.log("leftClosed",this.leftClosed,", leftFlags ",this.leftFlags),this._exitWinAllOpened();if(this.field[t][e]===C){var n,a=this._getArea8Closed(e,t),l=Object(v.a)(a);try{for(l.s();!(n=l.n()).done;){var i=n.value,s=i.x,o=i.y;this.stepToOpenCell(s,o)}}catch(r){l.e(r)}finally{l.f()}}}},{key:"markMine",value:function(e,t){this.closedField[t][e]===y&&this.leftFlags?(this.leftFlags-=1,this.leftClosed-=1,this.closedField[t][e]=b,console.log("FLAG THE MINE \ud83d\udea9",e,t)):this.closedField[t][e]===b&&(this.leftFlags+=1,this.leftClosed+=1,this.closedField[t][e]=y,console.log("DELETE FLAG X\ud83d\udea9",e,t))}},{key:"ifSafeSpaceOpenArea8",value:function(e,t){console.log("_checkIsThisSafeCell",e,t);var n=this._getArea8(e,t),a=this._getArea8Flagged(e,t,n),l=this._getArea8Closed(e,t,n),i=this.closedField[t][e];if(Number.isInteger(i)&&i!==C&&l.length&&i===a.length){var s,o=this._getArea8Closed(e,t),r=Object(v.a)(o);try{for(r.s();!(s=r.n()).done;){var c=s.value,u=c.x,d=c.y;this.stepToOpenCell(u,d)}}catch(h){r.e(h)}finally{r.f()}}}}]),e}(),k=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).updateState=function(){a.setState({gameProcessState:a.game.gameState,closedField:a.game.closedField})},a._handleStartNewGame=function(e,t,n){a.game=new S(e,t,n),a.game.init(),document.documentElement.style.setProperty("--x",e),document.documentElement.style.setProperty("--y",t),a.updateState()},a._openCell=function(e,t){var n=Date.now();console.log("start",0),a.game.stepToOpenCell(Number(e),Number(t)),console.log("end STEP",Date.now()-n),console.log(a.game.gameState),a.updateState()},a._markFlag=function(e,t){a.game.markMine(Number(e),Number(t)),a.updateState()},a._openSafeArea8=function(e,t){a.game.ifSafeSpaceOpenArea8(Number(e),Number(t)),a.updateState()},a.handleClick=function(e){var t=e.target;if(!t.classList.contains("Cell"))return!1;if(e.ctrlKey)return a.handleContextMenu(e);if(e.shiftKey)return a.handleMouseDown(e);if(t.classList.contains("closed")&&!t.classList.contains("flagged")){var n=t.dataset,l=n.x,i=n.y;a._openCell(l,i)}},a.handleContextMenu=function(e){e.preventDefault();var t=e.target;if(!t.classList.contains("Cell"))return!1;if(t.classList.contains("closed")){var n=t.dataset,l=n.x,i=n.y;a._markFlag(l,i)}},a.handleMouseDown=function(e){var t=e.target,n=e.button;if(!t.classList.contains("Cell")||0!==n)return!1;if(!t.classList.contains("closed")&&!t.classList.contains("empty")){var l=t.dataset,i=l.x,s=l.y;a._openSafeArea8(i,s)}},a.state={gameProcessState:"no-game",closedField:[]},a.boardEl=l.a.createRef(),a}return Object(r.a)(n,[{key:"render",value:function(){var e=this.state,t=e.gameProcessState,n=e.closedField,a={onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseDown:this.handleMouseDown},i={win:l.a.createElement("span",null,". ",l.a.createElement("span",{className:"messageWin"},"All opened right! You win!\ud83c\udfc6")),lose:l.a.createElement("span",null,". ",l.a.createElement("span",{className:"messageLose"},"BOOM! Game Over! \u2620\ufe0f")),playing:null};return l.a.createElement("div",{className:"App",onContextMenu:function(e){return e.preventDefault()},onDoubleClick:function(e){return e.preventDefault()}},l.a.createElement(h,{handleStartNewGame:this._handleStartNewGame}),"no-game"===t?null:l.a.createElement("div",{className:"message"},l.a.createElement("span",{className:"messageFlags ".concat(0===this.game.leftFlags?"messageFlagsZero":null)},"Flags: ",this.game.leftFlags," "),"of ",this.game.mines,i[t]),"no-game"===t?null:l.a.createElement(g,{closedField:n,gameProcessState:t,boardHandles:a}))}}]),n}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.f387535c.chunk.js.map